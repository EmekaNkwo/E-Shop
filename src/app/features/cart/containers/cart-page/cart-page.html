<div class="cart-container">
  <h2>Your Shopping Cart</h2>

  @if (items().length > 0) {
  <mat-list role="list" class="cart-items">
    @for (item of items(); track item.id) {
    <mat-list-item role="listitem" class="cart-item">
      <div class="item-image">
        <img
          [src]="item.image || 'assets/images/placeholder-product.png'"
          [alt]="item.title"
          loading="lazy"
        />
      </div>
      <div class="item-details">
        <h3 class="item-title">{{ item.title }}</h3>
        <p class="item-price">{{ item.price | currency : 'USD' : 'symbol' : '1.2-2' }}</p>
        <div class="item-quantity">
          <button mat-icon-button (click)="updateQuantity(item.id, -1)">
            <mat-icon>remove</mat-icon>
          </button>
          <span class="quantity">{{ item.quantity }}</span>
          <button mat-icon-button (click)="updateQuantity(item.id, 1)">
            <mat-icon>add</mat-icon>
          </button>
        </div>
      </div>
      <div class="item-total">
        {{ item.price * item.quantity | currency }}
      </div>
      <button
        mat-icon-button
        color="warn"
        (click)="remove(item.id)"
        aria-label="Remove {{ item.title }} from cart"
        matTooltip="Remove from cart"
        class="remove-btn"
      >
        <mat-icon>delete</mat-icon>
      </button>
    </mat-list-item>
    }
  </mat-list>

  <div class="cart-summary">
    <div class="total-amount">
      <span>Total ({{ items().length }} {{ items().length === 1 ? 'item' : 'items' }}):</span>
      <span class="amount">{{ total() | currency : 'USD' : 'symbol' : '1.2-2' }}</span>
    </div>

    <div class="cart-actions">
      <button
        mat-stroked-button
        color="warn"
        (click)="clearCart()"
        class="clear_cart"
        aria-label="Clear shopping cart"
      >
        <mat-icon>remove_shopping_cart</mat-icon>
        Clear Cart
      </button>
      <button
        mat-raised-button
        color="primary"
        (click)="checkout()"
        class="checkout"
        aria-label="Proceed to checkout"
      >
        <mat-icon>shopping_cart_checkout</mat-icon>
        Proceed to Checkout ({{ items().length }})
      </button>
    </div>
  </div>
  } @else {
  <div class="empty-cart" aria-live="polite">
    <mat-icon>shopping_cart_off</mat-icon>
    <h3>Your cart is empty</h3>
    <p>
      Looks like you haven't added any items to your cart yet. Start shopping to find amazing
      products!
    </p>
    <button mat-raised-button color="primary" routerLink="/products" aria-label="Browse products">
      <mat-icon>shopping_bag</mat-icon>
      Browse Products
    </button>
  </div>
  }
</div>
